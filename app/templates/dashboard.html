{% extends "base.html" %}

{% block title %}ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ - Firebase Auth App{% endblock %}

{% block content %}
<div class="user-info">
    {% if user.photo_url %}
    <img src="{{ user.photo_url }}" alt="Avatar" class="user-avatar">
    {% else %}
    <div class="user-avatar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; justify-content: center; align-items: center; color: white; font-size: 2rem;">
        {{ (user.display_name or user.email)[0] | upper }}
    </div>
    {% endif %}
    <h2 class="user-name">{{ user.display_name or 'ãƒ¦ãƒ¼ã‚¶ãƒ¼' }}</h2>
    <p class="user-email">{{ user.email }}</p>
</div>

<h1>ğŸ‰ ã‚ˆã†ã“ãï¼</h1>
<p style="text-align: center; color: #666; margin: 20px 0;">
    ãƒ­ã‚°ã‚¤ãƒ³ã«æˆåŠŸã—ã¾ã—ãŸã€‚
</p>

<div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
    <h3 style="margin-bottom: 10px; color: #333;">ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±</h3>
    <p style="color: #555; margin-bottom: 8px;"><strong>ID:</strong> {{ user.id[:20] }}...</p>
    <p style="color: #555; margin-bottom: 8px;"><strong>ç™»éŒ²æ—¥:</strong> {{ user.created_at.strftime('%Yå¹´%mæœˆ%dæ—¥') if user.created_at else 'ä¸æ˜' }}</p>
    <p style="color: #555;"><strong>æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³:</strong> {{ user.last_login_at.strftime('%Yå¹´%mæœˆ%dæ—¥ %H:%M') if user.last_login_at else 'ä¸æ˜' }}</p>
</div>

<form hx-post="/auth/logout" hx-swap="none">
    <button type="submit" class="btn btn-logout">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
</form>
{% endblock %}

{% block extra_scripts %}
<script>
    // HTMXã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’å‡¦ç†
    document.body.addEventListener('htmx:beforeSwap', function(evt) {
        const xhr = evt.detail.xhr;
        const redirectUrl = xhr.getResponseHeader('HX-Redirect');
        if (redirectUrl) {
            window.location.href = redirectUrl;
        }
    });
</script>
{% endblock %}